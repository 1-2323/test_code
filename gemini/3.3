from fastapi import APIRouter, Request, Form
from fastapi.templating import Jinja2Templates
from fastapi.responses import HTMLResponse
from pydantic import BaseModel

router = APIRouter()
templates = Jinja2Templates(directory="templates")

class Comment(BaseModel):
    text: str

@router.post("/comments", response_class=HTMLResponse)
async def create_comment(request: Request, text: str = Form(...)):
    # В реальном приложении здесь была бы логика сохранения в БД
    comment_data = {"text": text, "author": "Anonymous"}
    
    return templates.TemplateResponse(
        "comment_item.html", 
        {"request": request, "comment": comment_data}
    )
