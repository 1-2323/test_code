from datetime import datetime
from dateutil import parser
from typing import Optional, Union

class DateUtility:
    """
    Класс для удобной обработки и форматирования дат.
    Использует python-dateutil для гибкого парсинга пользовательского ввода.
    """

    @staticmethod
    def parse_date(date_string: str) -> Optional[datetime]:
        """
        Парсит строку в объект datetime. 
        Поддерживает большинство мировых форматов дат.
        """
        try:
            # dayfirst=True помогает корректно обрабатывать формат DD.MM.YYYY
            return parser.parse(date_string, dayfirst=True)
        except (ValueError, OverflowError, TypeError):
            return None

    @staticmethod
    def format_date(dt: datetime, fmt: str = "%d.%m.%Y") -> str:
        """
        Приводит объект datetime к строковому представлению.
        """
        if not isinstance(dt, datetime):
            return "Некорректный объект даты"
        return dt.strftime(fmt)

    @classmethod
    def process_user_input(cls, user_input: str, output_format: str = "%Y-%m-%d") -> str:
        """
        Комплексный метод: принимает ввод, парсит его и возвращает в нужном формате.
        """
        parsed_dt = cls.parse_date(user_input)
        if parsed_dt:
            return cls.format_date(parsed_dt, output_format)
        return "Ошибка: Не удалось распознать дату"

# --- Пример использования ---
if __name__ == "__main__":
    util = DateUtility()
    
    inputs = ["25/12/2023", "October 10, 2022", "2021-05-01", "tomorrow"]
    
    print(f"{'Ввод пользователя':<20} | {'Результат обработки'}")
    print("-" * 45)
    for i in inputs:
        result = util.process_user_input(i)
        print(f"{i:<20} | {result}")
